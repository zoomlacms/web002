{ZL.Source id="常规商品数据源"/}
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>{SField sid="常规商品数据源" FD="Proname" page="0"/}_{$SiteName/}</title>
<meta name="Keywords" content="{SField sid="常规商品数据源" FD="Meta_Keywords" page="0"/}" />
<meta name="description" content="{SField sid="常规商品数据源" FD="Meta_Description" page="0"/}" />
<link href="{$CssDir/}global.css" rel="stylesheet" type="text/css" />
<link href="{$CssDir/}jqzoom.css" rel="stylesheet" type="text/css" />
{ZL:HTML5()/}
<script src="{$SiteURL/}/js/jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="{$SiteURL/}/js/scrolltopcontrol.js" type="text/javascript"></script>
<script src="{$SiteURL/}/js/jquery.lazyload.js" type="text/javascript"></script>
<script type="text/javascript" src="{$CssDir/}js/jquery.min.js"></script>
<script type="text/javascript" src="{$CssDir/}js/jqzoom.pack.1.0.1.js"></script>
<script type=text/javascript>
function switchTab(mark,index,count) {
	    var curTab = document.getElementById("tab_"+mark+index)
		var curList = document.getElementById("list_"+mark+index)
 
		for(var i=0;i<=count;i++) {
 
			var tabObj = document.getElementById("tab_"+mark+i) ;
			var listObj = document.getElementById("list_"+mark+i) ;
			if (i != index) {
				if (tabObj) {tabObj.className = "";}
				if (listObj) {listObj.style.display = "none" ;}
			}
		}
 
		if (curTab) {curTab.className = "zc_on" ;}
		if (curList) {curList.style.display = "block" ;}
		return false;
	}
</script>
<style type="text/css">
.active,#colors,#sizes{ color:#F00}
#Menu{SField sid="常规商品数据源" FD="NodeID" page="0"/} a span:hover{ text-decoration:underline;}
#Menu{SField sid="常规商品数据源" FD="NodeID" page="0"/} a span{background:url({$CssDir/}Images/top_nav.gif) no-repeat 0px -42px; font-weight:bold; color:#fff; text-decoration:none;width:77px; height:38px; display:block;}
</style>
</head>
<body>
{ZL.Label id="蓝色头部"/}

<div id="mysite">
    <p>您的位置：<a href="/">{$SiteName/}</a>>>{ZL.Label id="输出指定ID节点名" NodeID="{SField sid="常规商品数据源" FD="Nodeid" page="0"/}" /}>>商品介绍</p>
    <!--这里还可以放一个通栏广告位 -->
</div>
<!--内容主体开始 -->
<div id="main">
<div id="main_l">

<div class="main_l_show">
<div class="main_l_title"><span><a href="{ZL:GetNodeUrl(78)/}">更多文章..</a></span>最近更新</div>
<ul>
{ZL.Label id="输出指定节点标题_无时间属性" NodeID="{SField sid="常规商品数据源" FD="NodeID" page="0"/}" TitleNum="30" ShowNum="5" /}
</ul>
</div><!--循环块之一结束 -->

<div class="main_l_ad"><img src="{$CssDir/}Images/213X70.gif" /></div>

<div class="main_l_show">
<div class="main_l_title"><span><a href="{ZL:GetNodeUrl(78)/}">更多推荐..</a></span>最新推荐</div>
<ul>
{ZL.Label id="输出指定节点标题_无时间属性" NodeID="{SField sid="常规商品数据源" FD="NodeID" page="0"/}" TitleNum="30" ShowNum="5" /}
</ul>
</div><!--循环块之一结束 -->

<div class="main_l_show">
<div class="main_l_title"><span><a href="{ZL:GetNodeUrl(78)/}">更多热门..</a></span>最新热门</div>
<ul>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
</ul>
</div><!--循环块之一结束 -->

<div class="main_l_ad"><img src="{$CssDir/}Images/213X70-2.gif" /></div>

<div class="main_l_show">
<div class="main_l_title"><span><a href="{ZL:GetNodeUrl(78)/}">更多会员..</a></span>热门会员</div>
<ul>
{ZL.Label id="输出指定节点标题_无时间属性" NodeID="78" TitleNum="30" ShowNum="5" /}
</ul>
</div><!--循环块之一结束 -->

<div class="main_l_show">
<div class="main_l_title"><span><a href="{ZL:GetNodeUrl(78)/}">更多问券..</a></span>问券调查</div>
<ul>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
</ul>
</div><!--循环块之一结束 -->

<div class="main_l_ad"><img src="{$CssDir/}Images/213X70-3.gif" /></div>

<div class="main_l_show">
<div class="main_l_title"><span><a href="{ZL:GetNodeUrl(78)/}">进入SNS社区..</a></span>新开空间</div>
<ul>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
<li><a href="">文章标题文章标题</a></li>
</ul>
</div><!--循环块之一结束 -->

</div><!--左 -->

<div id="ShopCon_r">

 <h1>{SField sid="常规商品数据源" FD="Proname" page="0"/}</h1>
<div class="main_left">
<div class="proimg">
		<div class="tablist block">
  
		<a href="/{SField sid="常规商品数据源" FD="Thumbnails" page="0"/}" class="jqzoom" style="" title="放大镜">
		<div id="jkdd"></div>
<script> 
var mark='{SField sid="常规商品数据源" FD="picture" page="0"/}';
var str1=mark.split('$')
var n1=mark.lastIndexOf('图片地址1|')+6;　
if(str1.length>1){
var n2=mark.lastIndexOf('$图片地址2');
mark=mark.substring(n1,n2);
document.getElementById("jkdd").innerHTML="<img src='UploadFiles/"+mark+"'  alt='商品大图' id='turnimg' />";
}
else{
mark=mark.substring(n1);
document.getElementById("jkdd").innerHTML="<img src='UploadFiles/"+mark+"'  alt='商品大图' id='turnimg' />";
}
</script>
</a>
</div>
 	<ul id="tab1">{ZL:SplitPicUrl({SField sid="常规商品数据源" FD="picture" page="0"/})/}
	<div class="clear"></div> 
	</ul>
	</div>
 </div>
 
 <div id="Shoptxt">
 <div class="main_con">
<span><img src="{$CssDir/}Images/inco_1.gif
">&nbsp;&nbsp;编号:{SField sid="常规商品数据源" FD="ProCode" page="0"/}</span><br/>
<span><img src="{$CssDir/}Images/inco_1.gif
">&nbsp;&nbsp;品牌:{SField sid="常规商品数据源" FD="brand" page="0"/}</span><br/>
<span><img src="{$CssDir/}Images/inco_1.gif
">&nbsp;&nbsp;库存:{SField sid="常规商品数据源" FD="stock" page="0"/}{SField sid="常规商品数据源" FD="Prounit" page="0"/}</span><br/>
<span><img src="{$CssDir/}Images/inco_1.gif
">&nbsp;&nbsp;零售价:{ZL:GetMoney({SField sid="常规商品数据源" FD="ShiPrice" page="0"/},2,1)/}元</a></span><br/>
<span id="dai" style="display:none"><img src="{$CssDir/}Images/inco_1.gif
">&nbsp;&nbsp;代理价:{ZL:GetMoney({SField sid="常规商品数据源" FD="LinPrice" page="0"/},2,1)/}元</a><br/></span>

<span><img src="{$CssDir/}Images/inco_1.gif">&nbsp;&nbsp;会员价:{ZL:GetMoney({SField sid="常规商品数据源" FD="UserPrice" page="0"/},2,1)/}元</span><br/>
</div>

<span><img src="{$CssDir/}Images/inco_1.gif">&nbsp;&nbsp;颜色：<script language="javascript">    
str='{SField sid="常规商品数据源" FD="color" page="0"/}'; //这是一字符串
var strs= new Array(); //定义一数组

strs=str.split(","); //字符分割 


     
for (n=0;n<strs.length ;n++ )    
    {    //分割后的字符输出
 
        document.write("<a href='javascript:void(0)' class='normal' id='color"+n+"' onclick=changcolor('"+strs[n]+"','"+n+"')>"+strs[n]+"</a>");    //分割后的字符输出
    } 
</script></span><br/>
<span>
<img src="{$CssDir/}Images/inco_1.gif">&nbsp;&nbsp;尺寸：
<script language="javascript">    
str='{SField sid="常规商品数据源" FD="size" page="0"/}'; //这是一字符串
var strs= new Array(); //定义一数组
strs=str.split(","); //字符分割 
for (i=0;i<strs.length ;i++ )    
    {    //分割后的字符输出
      document.write("<a href='javascript:void(0)' class='normal' id='size"+i+"' onclick=changUrl('"+strs[i]+"','"+i+"')>"+strs[i]+"</a>");    //分割后的字符输出
    } 
</script>
</span>


<div class="to_buy">
你已选择：<span id="colors"></span><span id="sizes"></span>
<form id="form" name="form" method="post" action="/UserCart.aspx">
<input name="id" type="hidden" id="id" value="{SField sid="常规商品数据源" FD="ID" page="0"/}" />
我要买 <a href="javascript:;" class="J_minus">-</a><input name="Pronum" type="text" id="Pronum" value="1" class="J_input" /><a href="javascript:;" class="J_add">+</a>{SField sid="常规商品数据源" FD="Prounit" page="0"/}
<div style="display:none"><input type="submit" name="button" id="button" value="提交" />
</div> <input name="Attribute" id="Attribute"  type="hidden" value="">
</form>
<input name="color" value="" id="color" type="hidden">
<input name="size" value="" id="size" type="hidden">
  <table>
  
 <tr><td>
  <a  style="cursor:pointer" onClick="subm()">
<img  src="{$CssDir/}Images/buy.jpg"/></a>
 </td><td>
<a href="/User/Content/AddToFav.aspx?itemid={SField sid="常规商品数据源" FD="ID" page="0"/}&Url=/Shop.aspx?itemid={SField sid="常规商品数据源" FD="ID" page="0"/}&type=2">
<img src="{$CssDir/}Images/Collection.jpg">
</a>
 
</td></tr></table>

 

</div>

    </div>
<div class="clear"></div>
<div class="sym_top">按参数购买</div>
<div style="padding-left:20px; line-height:28px;">
<!--ys添加-->
<div style="display:none;">
<form id="form" name="formw" method="post" action="/ShopCar.aspx" runat="server" target="_blank"> 
商品页网址 <input type="text" id="ProUrl" name="ProUrl" value="/Shop.aspx?ItemID={$GetRequest(ItemID)$}"/><br>
商品名称<input type="text" id="Proname" name="Proname" value="{SField sid="常规商品数据源" FD="ProName" page="0"/}"/> 
来源卖家<input type="text" id="ProSeller" name="ProSeller" value="{SField sid="常规商品数据源" FD="AddUser" page="0"/}"/> 
商品价格<input type="text" id="Wholesaleone" name="Wholesaleone" value="{ZL:GetMoney({SField sid="常规商品数据源" FD="LinPrice" page="0"/},2,1)/}" /> 
商品数量<input type="text" id="Stock" name="Stock"  value="1" /> 
商品类型<input type="text" id="ProClass" name="ProClass" value="1" /> 
您的备注<input type="text" id="Proinfo" name="Proinfo" value="备注" /> 
商品属性<input type="text" id="Attribute2" name="Attribute"  value="属性"   /> 
商品图片地址<input type="text" id="Thumbnails" name="Thumbnails" value="{SField sid="常规商品数据源" FD="Thumbnails" page="0"/}" /> 
<input type="submit" name="button" id="button" value="提交" /><br>
</form>
</div>
 
<div id="priceC"></div>
<script>
var strval='{SField sid="常规商品数据源" FD="Nums" page="0"/}';
strval=strval.split(','); 
for(var i=0;i<strval.length;i++){
	strval[i]=strval[i].split('|');
	if(strval[i].length>1){
document.getElementById("priceC").innerHTML+=strval[i][0]+"|价格:<input type='hidden' name='price' id='price"+i+"' value='"+strval[i][1]+"'>"+strval[i][1]+"<input type='text' name='num' id='num"+i+"' value='1' >件<input type='button' class='gopay' id='buttons"+i+"' onclick='putval("+i+")' value='购买'><br>";
}; 
	}
function putval(num){
	document.getElementById("Stock").value=document.getElementById("num"+num).value;//赋予购物表单中商品数量值
		document.getElementById("Wholesaleone").value=document.getElementById("price"+num).value;//赋予购物表单中商品价格值
	  formw.submit();//提交name为formw的form表单
	}
</script>  
<!--ys添加-->
 </div>

<div class="sym_top">商品详细</div>
<div class="sym">
{SField sid="常规商品数据源" FD="Procontent" page="0"/}
</div>
</div><!--右 -->

</div>
<!--内容主体结束 -->

<div style="clear:both;"></div>
{ZL.Label id="蓝色底部"/}
 <script> //商品图片切换 

$('#tab1 img').click(function(){
	var proimgsrc=$(this).attr('src');
	$('#turnimg').attr('src',proimgsrc);
	$('.jqzoom').attr('href',proimgsrc)
})
 
</script>
 <script type="text/javascript">
 	$(document).ready(function(){
		$(function() {
			var options =
			{
			zoomWidth: 300,
	    zoomHeight: 300,
			lens:false
			}
			$(".jqzoom").jqzoom(options) //NO.1 image
		})
 	})
 	</script>  
    
    
    <script>
function changUrl(n,a){
		for (var i=0;i<20;i++){
	
		if(i==a&&document.getElementById("size"+i).className=='normal'){
        document.getElementById("size"+i).className='active';
		$("#size").val(n);
		$("#sizes").html(n); 

	} 
else if(i==a&&document.getElementById("size"+i).className=='active'){
document.getElementById("size"+i).className='normal';
$("#size").val("");
$("#sizes").html(""); 

}
else{
document.getElementById("size"+i).className='normal';
$("#size").val(n);
$("#sizes").html(n); 
			}
}}
function changcolor(n,b) {
	for (var i=0;i<20;i++){
		if(i==b&&document.getElementById("color"+i).className=='normal'){
        document.getElementById("color"+i).className='active';
$("#color").val(n);
$("#colors").html(n); 

	} 
else if(i==b&&document.getElementById("color"+i).className=='active'){
document.getElementById("color"+i).className='normal';
$("#color").val("");
$("#colors").html(""); 
}

else{
document.getElementById("color"+i).className='normal';
$("#color").val(n);
$("#colors").html(n); 
}
}
}
	function subm(){
		document.getElementById("Attribute").value="颜色："+document.getElementById("color").value+";尺寸:"+document.getElementById("size").value
document.forms[0].submit(); 
		}
    
	/*商品加减*/
	$.fn.iVaryVal=function(iSet){
	iSet=$.extend({Minus:$('.J_minus'),Add:$('.J_add'),Input:$('.J_input'),Min:0,Max:20,Fun:null},iSet);
	var C=null,O=null;
	//输出值全局对象[若担心全局对象污染，可定义一个hidden表单，向其传值]
	$GLOBAL={};
	//增加
	iSet.Add.each(function(i){
		$(this).click(function(){
			O=parseInt(iSet.Input.eq(i).val());
			(O+1<=iSet.Max) || (iSet.Max==null) ? iSet.Input.eq(i).val(O+1) : iSet.Input.eq(i).val(iSet.Max);
			//输出当前改变后的值
			$GLOBAL.val=iSet.Input.eq(i).val();
			$GLOBAL.index=i;
			//回调函数
			if (typeof iSet.Fun == 'function') {
				iSet.Fun.call(this);
		  	}
		});
	});
	//减少
	iSet.Minus.each(function(i){
		$(this).click(function(){
			O=parseInt(iSet.Input.eq(i).val());
			O-1<iSet.Min ? iSet.Input.eq(i).val(iSet.Min) : iSet.Input.eq(i).val(O-1);
			$GLOBAL.val=iSet.Input.eq(i).val();
			$GLOBAL.index=i;
			//回调函数
			if (typeof iSet.Fun == 'function') {
				iSet.Fun.call(this);
		  	}
		});
	});
	//手动
	iSet.Input.bind({
		'click':function(){
			O=parseInt($(this).val());
			$(this).select();
		},
		'keyup':function(e){
			if($(this).val()!=''){
				C=parseInt($(this).val());
				//非负整数判断
				if(/^[1-9]\d*|0$/.test(C)){
					$(this).val(C);
					O=C;
				}else{
					$(this).val(O);
				}
			}
			//键盘控制：上右--加，下左--减
			if(e.keyCode==38 || e.keyCode==39){
				iSet.Add.eq(iSet.Input.index(this)).click();
			}
			if(e.keyCode==37 || e.keyCode==40){
				iSet.Minus.eq(iSet.Input.index(this)).click();
			}
			//输出当前改变后的值
			$GLOBAL.val=$(this).val();
			$GLOBAL.index=iSet.Input.index(this);
			//回调函数
			if (typeof iSet.Fun == 'function') {
				iSet.Fun.call(this);
		  	}
		},
		'blur':function(){
			$(this).trigger('keyup');
			if($(this).val()==''){
				$(this).val(O);
			}
			//判断输入值是否超出最大最小值
			if(iSet.Max){
				if(O>iSet.Max){
					$(this).val(iSet.Max);
				}
			}
			if(O<iSet.Min){
				$(this).val(iSet.Min);
			}
			//输出当前改变后的值
			$GLOBAL.val=$(this).val();
			$GLOBAL.index=iSet.Input.index(this);
			//回调函数
			if (typeof iSet.Fun == 'function') {
				iSet.Fun.call(this);
		  	}
		}
	});
}
//调用
$( function() {
	
	$('.i_box').iVaryVal({Fun:function(){
		
	}});
});
    </script>
    
</body>
</html>
